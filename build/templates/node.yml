parameters:
  skipInstall: false

steps:
  - task: NodeTool@0
    displayName: Use Node 18.x
    inputs:
      versionSpec: 18.x

  - task: npmAuthenticate@0
    inputs:
      workingFile: '$(Build.SourcesDirectory)/.npmrc'

  - task: CmdLine@2
    displayName: npm install
    condition: and(succeeded(), ne(parameters.skipInstall, true))
    inputs:
      script: npm run install:all
